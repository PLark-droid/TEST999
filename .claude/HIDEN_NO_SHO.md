# 秘伝の書 - Miyabi × Claude Max 神の開発力

> 「雅とは、複雑さを隠し、シンプルに見せる洗練された美である」
> — ハヤシシュンスケ

---

## 第一章: 人間の役割

### 人間がやること

```
1. 何を作りたいか考える
2. Issueに書く
3. 「処理して」と言う
4. PRをレビューしてマージする
```

**以上。**

### 人間がやらなくていいこと

```
❌ タスクを細かく分解する → Agentがやる
❌ 依存関係を考える → Agentがやる
❌ コードを書く → Agentがやる
❌ テストを書く → Agentがやる
❌ PRを作る → Agentがやる
```

---

## 第二章: Issueの書き方

### 最小限のIssue（これで十分）

```markdown
## 概要
ユーザー認証機能を実装したい

## やりたいこと
- ログイン・ログアウトができる
- JWTトークンで認証
```

### Agentが自動でやること

1. **IssueAgent**: 分析・ラベル付与・見積もり
2. **CoordinatorAgent**: タスク分解・依存関係推論・DAG構築
3. **CodeGenAgent**: コード生成・テスト生成
4. **ReviewAgent**: 品質チェック（80点以上で合格）
5. **PRAgent**: PR作成

**依存関係は書かなくていい。Agentが推論する。**

### より良いIssue（オプション）

具体的な条件があれば書く:

```markdown
## 概要
ユーザー認証機能を実装したい

## やりたいこと
- ログイン・ログアウトができる
- JWTトークンで認証

## 制約（あれば）
- Firebase Authは使わない
- セッションは24時間で切れる
```

---

## 第三章: 日常のワークフロー

### 朝（5分）

```bash
# 1. ステータス確認
miyabi status

# 2. 未処理Issueを全自動処理
miyabi auto
```

### 日中

```
- エスカレーションが来たら対応
- PRが来たらレビュー＆マージ
- 新しいアイデアがあればIssue作成
```

### Issue作成（1分）

```bash
gh issue create --title "機能: やりたいこと" --body "説明"
```

または Claude Code に話しかける:

```
「認証機能のIssueを作って、そのまま処理して」
```

---

## 第四章: 人間が身につけるべきスキル

### 必須スキル

| スキル | なぜ必要か | 学習時間目安 |
|-------|----------|------------|
| **Git基礎** | PRのマージ、ブランチ理解 | 1日 |
| **GitHub操作** | Issue作成、PR確認 | 半日 |
| **Markdown** | Issueを書くため | 1時間 |
| **要件定義** | 何を作りたいか言語化する | 経験で磨く |

### あると良いスキル

| スキル | なぜ必要か |
|-------|----------|
| **TypeScript読解** | 生成コードのレビュー |
| **テストの読み方** | 品質確認 |
| **API設計の基礎** | 要件を具体化できる |

### 不要なスキル（Agentがやる）

```
❌ コーディング詳細
❌ テスト実装
❌ CI/CD設定
❌ デプロイ作業
```

---

## 第五章: 読んでおくべきドキュメント

### 必読（すぐ読める）

| ドキュメント | 内容 | 時間 |
|-------------|------|------|
| [GitHub Docs - Issues](https://docs.github.com/ja/issues) | Issue作成の基本 | 30分 |
| [Markdown Guide](https://www.markdownguide.org/basic-syntax/) | Markdown記法 | 30分 |
| プロジェクトの `CLAUDE.md` | Claude Codeへの指示書 | 10分 |
| プロジェクトの `README.md` | プロジェクト概要 | 10分 |

### 推奨（時間があれば）

| ドキュメント | 内容 |
|-------------|------|
| [Conventional Commits](https://www.conventionalcommits.org/ja/) | コミットメッセージ規約 |
| [GitHub CLI Manual](https://cli.github.com/manual/) | ghコマンドの使い方 |
| [TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/) | TypeScript基礎（読解用） |

### 書籍（深く学びたい人向け）

| 書籍 | 内容 |
|------|------|
| 『リーダブルコード』 | コードの読み方・良いコードとは |
| 『Clean Architecture』 | システム設計の考え方 |
| 『プロダクトマネジメント』 | 要件定義・優先順位付け |
| 『チームトポロジー』 | チーム設計（識学理論に通じる） |

---

## 第六章: Claude Codeとの話し方

### 基本（これだけで十分）

```
「Issue #123 を処理して」
「認証機能のIssueを作って」
「ステータスを確認して」
「テストを実行して」
```

### 応用

```
「Issue作って、そのまま処理まで実行して」
「未処理のIssue全部並列で処理して」
「PRの状況を教えて」
```

### やらなくていいこと

```
❌ 細かいコードの指示
❌ ファイル構成の指示
❌ 実装方法の指示
```

**「何を作りたいか」だけ伝える。「どう作るか」はAgentに任せる。**

---

## 第七章: トラブル時の対応

### エスカレーションが来たら

Agentが判断できない時、人間に聞いてくる。

```
Agent: 「認証方式はJWTとセッションどちらにしますか？」
人間: 「JWTで」
Agent: 「了解。続行します」
```

**これは正常な動作。設計上の想定内。**

### PRのレビュー

```
1. 変更ファイルを確認
2. テストが通っているか確認
3. 問題なければマージ
4. 問題あればコメント → Agentが修正
```

### 品質スコアが80点未満

Agentが自動で修正して再提出する。人間は待つだけ。

---

## 第八章: 環境変数

### Claude Maxユーザー

```bash
GITHUB_TOKEN=ghp_xxxxx  # これだけでOK
```

### GitHub Actions用（自動実行）

```bash
GITHUB_TOKEN=ghp_xxxxx       # 必須
ANTHROPIC_API_KEY=sk-ant-xxx # Actions用
```

---

## 第九章: コマンド早見表

### 毎日使う

```bash
miyabi status              # 状態確認
miyabi auto                # 全自動モード
gh issue create            # Issue作成
gh pr list                 # PR一覧
gh pr merge <番号>          # PRマージ
```

### たまに使う

```bash
miyabi todos --create-issues  # TODOからIssue作成
miyabi doctor                 # ヘルスチェック
npm test                      # テスト実行
npm run typecheck             # 型チェック
```

---

## 終章: 雅の境地

### 究極の姿

```
朝、やりたいことをIssueに書く
「処理して」と言う
夕方、PRをマージする
夜、本番で動いている
```

### 心得三箇条

```
1. 何を作りたいかだけ考えろ
   → どう作るかはAgentに任せる

2. 細かく指示するな
   → Agentは優秀。信じろ

3. エスカレーションを歓迎しろ
   → それは設計通りの動作
```

---

## 付録: 学習ロードマップ

### Week 1: 基礎

```
□ GitHubアカウント作成
□ GitHub CLIインストール（gh）
□ Markdown記法を覚える
□ 最初のIssueを作成してみる
```

### Week 2: 実践

```
□ miyabi initでプロジェクト作成
□ Issueを3つ作成
□ 「処理して」でAgent実行
□ PRをレビュー＆マージ
```

### Week 3: 応用

```
□ miyabi autoで全自動運用
□ エスカレーション対応を経験
□ 複数Issueの並列処理
□ チームメンバーへの展開
```

---

🌸 **Miyabi** - 雅なる自律開発の境地へ

*人間は「何を作りたいか」に集中する。それ以外はAgentの仕事。*

---

**改訂日**: 2025-01-17
**バージョン**: 2.0.0
